(()=>{"use strict";const e=(()=>{const e=[],t=t=>{let d=e.find((e=>e.getName()===t));return d||(d=(e=>{let t=e,d=[];return{getName:()=>t,addHandler:e=>{d.push(e)},invokeHandlers:e=>{d.forEach((t=>{t(e)}))}}})(t),e.push(d)),d};return{publish:(e,d)=>{t(e).invokeHandlers(d)},subscribe:(e,d)=>{t(e).addHandler(d)}}})(),t=(()=>{const t=document.querySelector(".category-container"),d=document.querySelector(".add-category");let n=null;const r=(e,t=null,d=null)=>{const n=document.createElement(e);return t&&t.forEach((e=>n.classList.add(e))),d&&(n.textContent=d),n},i=(t,d)=>{n&&n.classList.remove("active"),t.classList.add("active"),n=t,e.publish("categoryActive",d)},a=e=>{const d=(e=>{const t=r("div",["category"]);return t.appendChild(r("div",["text"],e)),t.appendChild(r("div",["delete","btn"],"x")),t})(e.getName());t.appendChild(d),(e=>{const d=t.lastChild,n=d.lastChild;n.addEventListener("click",(t=>{t.stopPropagation(),s(n.parentNode,e.getName())})),d.addEventListener("click",(()=>{i(d,e.getName())}))})(e),i(d,e.getName())},s=(t,d)=>{t.remove(),e.publish("removeCategory",d)},o=document.querySelector(".item-container"),c=document.querySelector(".add-item"),l=e=>{for(;o.childElementCount>0;)o.lastChild.remove();e.map((e=>u(e)))},u=e=>{o.appendChild((e=>{const t=r("div",["item"]);return t.appendChild(r("div",["text"],e.content)),t.appendChild(r("div",["delete","btn"],"x")),t})(e))};return{init:()=>{d.addEventListener("click",(()=>{e.publish("addCategory",prompt("Enter"))})),c.addEventListener("click",(()=>{const t=n.firstChild.textContent,d=prompt("Enter");e.publish("addItem",{activeCategoryName:t,itemContent:d})})),e.subscribe("categoryAdded",a),e.subscribe("categoryItemsLoaded",l),e.subscribe("itemAdded",u)}}})(),d=(()=>{const t=[],d=e=>t.find((t=>t.getName()===e)),n=n=>{if(d(n))return void alert("This category already exists!");const r=(e=>{let t=e,d=[];return{getName:()=>t,addItem:e=>{const t={id:0,content:e};return d.push(t),t},getItems:()=>d}})(n);t.push(r),e.publish("categoryAdded",r)},r=e=>{const n=t.indexOf(d(e));t.splice(n,1)},i=t=>{const n=d(t).getItems();e.publish("categoryItemsLoaded",n)},a=t=>{const n=d(t.activeCategoryName).addItem(t.itemContent);e.publish("itemAdded",n)};return{init:()=>{e.subscribe("addCategory",n),e.subscribe("removeCategory",r),e.subscribe("categoryActive",i),e.subscribe("addItem",a)}}})();t.init(),d.init(),e.publish("addCategory","All"),e.publish("addCategory","Random"),e.publish("addCategory","Categories")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vdG9kb2lzdC8uL3NyYy9tb2R1bGVzL3B1YnN1Yi5qcyIsIndlYnBhY2s6Ly90b2RvaXN0Ly4vc3JjL21vZHVsZXMvVUkuanMiLCJ3ZWJwYWNrOi8vdG9kb2lzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvaXN0Ly4vc3JjL21vZHVsZXMvY2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkV2ZW50cyA6XG5cbmFkZEl0ZW1cbml0ZW1BZGRlZFxuXG5hZGRDYXRlZ29yeVxucmVtb3ZlQ2F0ZWdvcnlcbnVwZGF0ZUNhdGVnb3JpZXNcblxuKi9cblxuXG5jb25zdCBfRXZlbnQgPSAoZXZlbnROYW1lKSA9PiB7XG4gICAgbGV0IG5hbWUgPSBldmVudE5hbWU7XG4gICAgbGV0IGhhbmRsZXJzID0gW107XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZTtcbiAgICBjb25zdCBhZGRIYW5kbGVyID0gKGhhbmRsZXIpID0+IHtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICB9ICAgXG4gICAgY29uc3QgaW52b2tlSGFuZGxlcnMgPSAoZXZlbnRBcmdzKSA9PiB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goZm4gPT4ge1xuICAgICAgICAgICAgZm4oZXZlbnRBcmdzKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgIHJldHVybiB7IGdldE5hbWUsIGFkZEhhbmRsZXIsIGludm9rZUhhbmRsZXJzLH07XG59XG5cbmNvbnN0IFB1YlN1YiA9ICgoKSA9PiB7XG4gICAgY29uc3QgX2V2ZW50cyA9IFtdO1xuXG4gICAgY29uc3QgY2hlY2tFdmVudCAgPSAoZXZlbnROYW1lKSA9PiB7XG4gICAgICAgIGxldCBldmVudCA9IF9ldmVudHMuZmluZChldmVudCA9PiBldmVudC5nZXROYW1lKCkgPT09IGV2ZW50TmFtZSk7XG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50ID0gX0V2ZW50KGV2ZW50TmFtZSk7XG4gICAgICAgICAgICBfZXZlbnRzLnB1c2goZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICBjb25zdCBwdWJsaXNoID0gKGV2ZW50TmFtZSwgZXZlbnRBcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gY2hlY2tFdmVudChldmVudE5hbWUpO1xuICAgICAgICBldmVudC5pbnZva2VIYW5kbGVycyhldmVudEFyZ3MpO1xuICAgIH1cblxuICAgIGNvbnN0IHN1YnNjcmliZSA9IChldmVudE5hbWUsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBjaGVja0V2ZW50KGV2ZW50TmFtZSk7XG4gICAgICAgIGV2ZW50LmFkZEhhbmRsZXIoaGFuZGxlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHVibGlzaCwgXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICB9O1xuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBQdWJTdWI7IiwiaW1wb3J0IFB1YlN1YiBmcm9tIFwiLi9wdWJzdWJcIjtcblxuY29uc3QgVUkgPSAoKCkgPT4ge1xuXG4gICAgLypcbiAgICBDYXRlZ29yaWVzIFVJXG4gICAgKi9cblxuICAgIGNvbnN0ICRjYXRlZ29yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS1jb250YWluZXInKTtcbiAgICBjb25zdCAkYWRkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWNhdGVnb3J5Jyk7XG4gICAgbGV0ICRjdXJyZW50QWN0aXZlID0gbnVsbDtcblxuICAgIGNvbnN0IGNyZWF0ZUh0bWxFbGVtZW50ID0gKHR5cGUsIGNsYXNzQXJyYXkgPSBudWxsLCBjb250ZW50ID0gbnVsbCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgaWYgKGNsYXNzQXJyYXkpIGNsYXNzQXJyYXkuZm9yRWFjaChjbHMgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNscykpO1xuICAgICAgICBpZiAoY29udGVudCkgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0gKGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICBjb25zdCAkY2F0ID0gY3JlYXRlSHRtbEVsZW1lbnQoJ2RpdicsIFsnY2F0ZWdvcnknXSk7XG4gICAgICAgICRjYXQuYXBwZW5kQ2hpbGQoY3JlYXRlSHRtbEVsZW1lbnQoJ2RpdicsIFsndGV4dCddLCBjYXRlZ29yeU5hbWUpKTtcbiAgICAgICAgJGNhdC5hcHBlbmRDaGlsZChjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWydkZWxldGUnLCAnYnRuJ10sICd4JykpO1xuICAgICAgICByZXR1cm4gJGNhdDtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRDYXRlZ29yeUxpc3RlbmVyID0gKGNhdCkgPT4ge1xuICAgICAgICBjb25zdCAkY2F0ZWdvcnkgPSAkY2F0ZWdvcnlDb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICBjb25zdCAkZGVsZXRlYnRuID0gJGNhdGVnb3J5Lmxhc3RDaGlsZDtcblxuICAgICAgICAkZGVsZXRlYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICByZW1vdmVDYXRlZ29yeSgkZGVsZXRlYnRuLnBhcmVudE5vZGUsIGNhdC5nZXROYW1lKCkpO1xuICAgICAgICB9KVxuXG4gICAgICAgICRjYXRlZ29yeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNldEFjdGl2ZSgkY2F0ZWdvcnksIGNhdC5nZXROYW1lKCkpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IHNldEFjdGl2ZSA9ICgkY2F0ZWdvcnksIGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICBpZiAoJGN1cnJlbnRBY3RpdmUpICRjdXJyZW50QWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJGNhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJGN1cnJlbnRBY3RpdmUgPSAkY2F0ZWdvcnk7XG4gICAgICAgIFxuICAgICAgICBQdWJTdWIucHVibGlzaCgnY2F0ZWdvcnlBY3RpdmUnLCBjYXRlZ29yeU5hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IGFkZENhdGVnb3J5ID0gKGNhdCkgPT4ge1xuICAgICAgICBjb25zdCAkbmV3Q2F0ZWdvcnkgPSBuZXdDYXRlZ29yeShjYXQuZ2V0TmFtZSgpKTtcbiAgICAgICAgJGNhdGVnb3J5Q29udGFpbmVyLmFwcGVuZENoaWxkKCRuZXdDYXRlZ29yeSk7XG4gICAgICAgIGFkZENhdGVnb3J5TGlzdGVuZXIoY2F0KTtcbiAgICAgICAgc2V0QWN0aXZlKCRuZXdDYXRlZ29yeSwgY2F0LmdldE5hbWUoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVtb3ZlQ2F0ZWdvcnkgPSAoY2F0RWxlbWVudCwgY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgICAgIGNhdEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdyZW1vdmVDYXRlZ29yeScsIGNhdGVnb3J5TmFtZSk7XG4gICAgfVxuXG5cbiAgICAvKlxuICAgIEl0ZW1zIFVJXG4gICAgKi9cbiAgICBcbiAgICBjb25zdCAkaXRlbUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pdGVtLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0ICRhZGRJdGVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1pdGVtJyk7XG5cbiAgICBjb25zdCBuZXdJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgJGl0ZW0gPSBjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWydpdGVtJ10pO1xuICAgICAgICAkaXRlbS5hcHBlbmRDaGlsZChjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWyd0ZXh0J10sIGl0ZW0uY29udGVudCkpO1xuICAgICAgICAkaXRlbS5hcHBlbmRDaGlsZChjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWydkZWxldGUnLCAnYnRuJ10sICd4JykpO1xuICAgICAgICByZXR1cm4gJGl0ZW07XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvd0l0ZW1zID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIHdoaWxlKCRpdGVtQ29udGFpbmVyLmNoaWxkRWxlbWVudENvdW50ID4gMCkgXG4gICAgICAgICAgICAkaXRlbUNvbnRhaW5lci5sYXN0Q2hpbGQucmVtb3ZlKCk7ICAvLyBDbGVhciBjb250ZW50c1xuXG4gICAgICAgIGl0ZW1zLm1hcChpdGVtID0+IGFkZEl0ZW1ET00oaXRlbSkpO1xuXG4gICAgfVxuXG4gICAgY29uc3QgYWRkSXRlbURPTSA9IChpdGVtKSA9PiB7XG4gICAgICAgICRpdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKG5ld0l0ZW0oaXRlbSkpO1xuICAgICAgICAvL2FkZEl0ZW1MaXN0ZW5lcihpdGVtKTtcbiAgICB9XG5cbiAgICBjb25zdCByZW1vdmVJdGVtID0gKCkgPT4ge1xuXG4gICAgfVxuXG4gICAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAgICAgJGFkZENhdGVnb3J5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgUHViU3ViLnB1Ymxpc2goJ2FkZENhdGVnb3J5JywgcHJvbXB0KCdFbnRlcicpKTtcbiAgICAgICAgfSlcblxuICAgICAgICAkYWRkSXRlbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNhdGVnb3J5TmFtZSA9ICRjdXJyZW50QWN0aXZlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBjb25zdCBpdGVtQ29udGVudCA9IHByb21wdCgnRW50ZXInKTtcbiAgICAgICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdhZGRJdGVtJywge2FjdGl2ZUNhdGVnb3J5TmFtZSwgaXRlbUNvbnRlbnR9KTtcbiAgICAgICAgfSlcblxuICAgICAgICBQdWJTdWIuc3Vic2NyaWJlKCdjYXRlZ29yeUFkZGVkJywgYWRkQ2F0ZWdvcnkpO1xuXG4gICAgICAgIFB1YlN1Yi5zdWJzY3JpYmUoJ2NhdGVnb3J5SXRlbXNMb2FkZWQnLCBzaG93SXRlbXMpO1xuICAgICAgICBQdWJTdWIuc3Vic2NyaWJlKCdpdGVtQWRkZWQnLCBhZGRJdGVtRE9NKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0LFxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBVSTtcblxuXG5cbiIsImltcG9ydCBQdWJTdWIgZnJvbSBcIi4vbW9kdWxlcy9wdWJzdWJcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi9tb2R1bGVzL1VJXCI7XG5pbXBvcnQgQ2F0ZWdvcnkgZnJvbSBcIi4vbW9kdWxlcy9jYXRlZ29yeVwiXG5cbmNvbnN0IENhdGVnb3J5Q29udHJvbGxlciA9ICgoKSA9PiB7XG5cbiAgICAvLyBDYXRlZ29yeVxuXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgY29uc3QgZ2V0Q2F0ZWdvcnkgPSAoY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiBjYXRlZ29yaWVzLmZpbmQoY2F0ID0+IGNhdC5nZXROYW1lKCkgPT09IGNhdGVnb3J5TmFtZSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGFkZENhdGVnb3J5ID0gKGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICBpZiAoZ2V0Q2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKSkge1xuICAgICAgICAgICAgYWxlcnQoJ1RoaXMgY2F0ZWdvcnkgYWxyZWFkeSBleGlzdHMhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2F0ID0gQ2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKTtcbiAgICAgICAgY2F0ZWdvcmllcy5wdXNoKGNhdCk7XG4gICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdjYXRlZ29yeUFkZGVkJywgY2F0KTtcbiAgICB9XG5cbiAgICBjb25zdCByZW1vdmVDYXRlZ29yeSA9IChjYXRlZ29yeU5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBjYXRlZ29yaWVzLmluZGV4T2YoZ2V0Q2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKSk7XG4gICAgICAgIGNhdGVnb3JpZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG5cbiAgICAvLyBJdGVtc1xuXG4gICAgY29uc3QgZ2V0SXRlbXMgPSAoY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gZ2V0Q2F0ZWdvcnkoY2F0ZWdvcnlOYW1lKS5nZXRJdGVtcygpO1xuICAgICAgICBQdWJTdWIucHVibGlzaCgnY2F0ZWdvcnlJdGVtc0xvYWRlZCcsIGl0ZW1zKTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRJdGVtID0gKGl0ZW1JbmZvT2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNhdCA9IGdldENhdGVnb3J5KGl0ZW1JbmZvT2JqLmFjdGl2ZUNhdGVnb3J5TmFtZSk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhY3RpdmVDYXQuYWRkSXRlbShpdGVtSW5mb09iai5pdGVtQ29udGVudCk7XG4gICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdpdGVtQWRkZWQnLCBpdGVtKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICBQdWJTdWIuc3Vic2NyaWJlKCdhZGRDYXRlZ29yeScsIGFkZENhdGVnb3J5KTtcbiAgICAgICAgUHViU3ViLnN1YnNjcmliZSgncmVtb3ZlQ2F0ZWdvcnknLCByZW1vdmVDYXRlZ29yeSk7XG5cbiAgICAgICAgUHViU3ViLnN1YnNjcmliZSgnY2F0ZWdvcnlBY3RpdmUnLCBnZXRJdGVtcyk7XG4gICAgICAgIFB1YlN1Yi5zdWJzY3JpYmUoJ2FkZEl0ZW0nLCBhZGRJdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0LFxuICAgIH07XG59KSgpO1xuXG5VSS5pbml0KCk7XG5DYXRlZ29yeUNvbnRyb2xsZXIuaW5pdCgpO1xuXG5QdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCAnQWxsJyk7XG5QdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCAnUmFuZG9tJyk7XG5QdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCAnQ2F0ZWdvcmllcycpO1xuXG5cblxuXG4iLCJpbXBvcnQgUHViU3ViIGZyb20gXCIuL3B1YnN1YlwiO1xuXG5jb25zdCBJdGVtID0gKGlkLCBjb250ZW50KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgfTtcbn1cblxuY29uc3QgQ2F0ZWdvcnkgPSAoY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgbGV0IG5hbWUgPSBjYXRlZ29yeU5hbWU7XG4gICAgbGV0IGl0ZW1zID0gW107XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZTtcblxuICAgIGNvbnN0IGFkZEl0ZW0gPSAoaXRlbUNvbnRlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IEl0ZW0oMCwgaXRlbUNvbnRlbnQpO1xuICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG5cbiAgICAvLyBjb25zdCByZW1vdmVJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAvLyAgICAgXG4gICAgLy8gfVxuXG4gICAgY29uc3QgZ2V0SXRlbXMgPSAoKSA9PiBpdGVtcztcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGFkZEl0ZW0sXG4gICAgICAgIGdldEl0ZW1zLFxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhdGVnb3J5OyJdLCJuYW1lcyI6WyJfZXZlbnRzIiwiY2hlY2tFdmVudCIsImV2ZW50TmFtZSIsImV2ZW50IiwiZmluZCIsImdldE5hbWUiLCJuYW1lIiwiaGFuZGxlcnMiLCJhZGRIYW5kbGVyIiwiaGFuZGxlciIsInB1c2giLCJpbnZva2VIYW5kbGVycyIsImV2ZW50QXJncyIsImZvckVhY2giLCJmbiIsIl9FdmVudCIsInB1Ymxpc2giLCJzdWJzY3JpYmUiLCIkY2F0ZWdvcnlDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCIkYWRkQ2F0ZWdvcnlCdG4iLCIkY3VycmVudEFjdGl2ZSIsImNyZWF0ZUh0bWxFbGVtZW50IiwidHlwZSIsImNsYXNzQXJyYXkiLCJjb250ZW50IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbHMiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInNldEFjdGl2ZSIsIiRjYXRlZ29yeSIsImNhdGVnb3J5TmFtZSIsInJlbW92ZSIsImFkZENhdGVnb3J5IiwiY2F0IiwiJG5ld0NhdGVnb3J5IiwiJGNhdCIsImFwcGVuZENoaWxkIiwibmV3Q2F0ZWdvcnkiLCJsYXN0Q2hpbGQiLCIkZGVsZXRlYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVDYXRlZ29yeSIsInBhcmVudE5vZGUiLCJhZGRDYXRlZ29yeUxpc3RlbmVyIiwiY2F0RWxlbWVudCIsIiRpdGVtQ29udGFpbmVyIiwiJGFkZEl0ZW1CdG4iLCJzaG93SXRlbXMiLCJpdGVtcyIsImNoaWxkRWxlbWVudENvdW50IiwibWFwIiwiaXRlbSIsImFkZEl0ZW1ET00iLCIkaXRlbSIsIm5ld0l0ZW0iLCJpbml0IiwicHJvbXB0IiwiYWN0aXZlQ2F0ZWdvcnlOYW1lIiwiZmlyc3RDaGlsZCIsIml0ZW1Db250ZW50IiwiQ2F0ZWdvcnlDb250cm9sbGVyIiwiY2F0ZWdvcmllcyIsImdldENhdGVnb3J5IiwiYWxlcnQiLCJhZGRJdGVtIiwiaWQiLCJnZXRJdGVtcyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIml0ZW1JbmZvT2JqIl0sInNvdXJjZVJvb3QiOiIifQ==