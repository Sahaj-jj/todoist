(()=>{"use strict";const e=(()=>{const e=[],t=t=>{let d=e.find((e=>e.getName()===t));return d||(d=(e=>{let t=e,d=[];return{getName:()=>t,addHandler:e=>{d.push(e)},invokeHandlers:e=>{d.forEach((t=>{t(e)}))}}})(t),e.push(d)),d};return{publish:(e,d)=>{t(e).invokeHandlers(d)},subscribe:(e,d)=>{t(e).addHandler(d)}}})(),t=(()=>{const t=document.querySelector(".category-container"),d=document.querySelector(".add-category");let n=null;const i=(e,t=null,d=null)=>{const n=document.createElement(e);return t&&t.forEach((e=>n.classList.add(e))),d&&(n.textContent=d),n},r=(t,d)=>{n&&n.classList.remove("active"),t.classList.add("active"),n=t,e.publish("categoryActive",d)},a=e=>{const d=(e=>{const t=i("div",["category"]);return t.appendChild(i("div",["text"],e)),t.appendChild(i("div",["delete","btn"],"x")),t})(e.getName());t.appendChild(d),(e=>{const d=t.lastChild,n=d.lastChild;n.addEventListener("click",(t=>{t.stopPropagation(),s(n.parentNode,e.getName())})),d.addEventListener("click",(()=>{r(d,e.getName())}))})(e),r(d,e.getName())},s=(t,d)=>{t.remove(),e.publish("removeCategory",d)},o=document.querySelector(".item-container"),c=document.querySelector(".add-item"),l=e=>{for(;o.childElementCount>0;)o.lastChild.remove();e.map((e=>u(e)))},u=e=>{o.appendChild((e=>{const t=i("div",["item"]);return t.appendChild(i("div",["text"],e.content)),t.appendChild(i("div",["delete","btn"],"x")),t})(e))};return{init:()=>{d.addEventListener("click",(()=>{e.publish("addCategory",prompt("Enter"))})),c.addEventListener("click",(()=>{const t=n.firstChild.textContent,d=prompt("Enter");e.publish("addItem",{activeCategoryName:t,itemContent:d})})),e.subscribe("categoryAdded",a),e.subscribe("showItems",l),e.subscribe("itemAdded",u)}}})(),d=(()=>{const t=[],d=e=>t.find((t=>t.getName()===e)),n=n=>{if(d(n))return void alert("This category already exists!");const i=(e=>{let t=e,d=[];return{getName:()=>t,addItem:e=>{const t={id:0,content:e};return d.push(t),t},getItems:()=>d}})(n);t.push(i),e.publish("categoryAdded",i)},i=e=>{const n=t.indexOf(d(e));t.splice(n,1)},r=t=>{const n=d(t).getItems();e.publish("showItems",n)},a=t=>{const n=d(t.activeCategoryName).addItem(t.itemContent);e.publish("itemAdded",n)};return{init:()=>{e.subscribe("addCategory",n),e.subscribe("removeCategory",i),e.subscribe("categoryActive",r),e.subscribe("addItem",a)}}})();t.init(),d.init(),e.publish("addCategory","All"),e.publish("addCategory","Random"),e.publish("addCategory","Categories")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Oi8vdG9kb2lzdC8uL3NyYy9tb2R1bGVzL3B1YnN1Yi5qcyIsIndlYnBhY2s6Ly90b2RvaXN0Ly4vc3JjL21vZHVsZXMvVUkuanMiLCJ3ZWJwYWNrOi8vdG9kb2lzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvaXN0Ly4vc3JjL21vZHVsZXMvY2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkV2ZW50cyA6XG5cbmFkZEl0ZW1cbml0ZW1BZGRlZFxuXG5hZGRDYXRlZ29yeVxucmVtb3ZlQ2F0ZWdvcnlcbnVwZGF0ZUNhdGVnb3JpZXNcblxuKi9cblxuXG5jb25zdCBfRXZlbnQgPSAoZXZlbnROYW1lKSA9PiB7XG4gICAgbGV0IG5hbWUgPSBldmVudE5hbWU7XG4gICAgbGV0IGhhbmRsZXJzID0gW107XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZTtcbiAgICBjb25zdCBhZGRIYW5kbGVyID0gKGhhbmRsZXIpID0+IHtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICB9ICAgXG4gICAgY29uc3QgaW52b2tlSGFuZGxlcnMgPSAoZXZlbnRBcmdzKSA9PiB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goZm4gPT4ge1xuICAgICAgICAgICAgZm4oZXZlbnRBcmdzKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgIHJldHVybiB7IGdldE5hbWUsIGFkZEhhbmRsZXIsIGludm9rZUhhbmRsZXJzLH07XG59XG5cbmNvbnN0IFB1YlN1YiA9ICgoKSA9PiB7XG4gICAgY29uc3QgX2V2ZW50cyA9IFtdO1xuXG4gICAgY29uc3QgY2hlY2tFdmVudCAgPSAoZXZlbnROYW1lKSA9PiB7XG4gICAgICAgIGxldCBldmVudCA9IF9ldmVudHMuZmluZChldmVudCA9PiBldmVudC5nZXROYW1lKCkgPT09IGV2ZW50TmFtZSk7XG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50ID0gX0V2ZW50KGV2ZW50TmFtZSk7XG4gICAgICAgICAgICBfZXZlbnRzLnB1c2goZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICBjb25zdCBwdWJsaXNoID0gKGV2ZW50TmFtZSwgZXZlbnRBcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gY2hlY2tFdmVudChldmVudE5hbWUpO1xuICAgICAgICBldmVudC5pbnZva2VIYW5kbGVycyhldmVudEFyZ3MpO1xuICAgIH1cblxuICAgIGNvbnN0IHN1YnNjcmliZSA9IChldmVudE5hbWUsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBjaGVja0V2ZW50KGV2ZW50TmFtZSk7XG4gICAgICAgIGV2ZW50LmFkZEhhbmRsZXIoaGFuZGxlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHVibGlzaCwgXG4gICAgICAgIHN1YnNjcmliZSxcbiAgICB9O1xuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBQdWJTdWI7IiwiaW1wb3J0IFB1YlN1YiBmcm9tIFwiLi9wdWJzdWJcIjtcblxuY29uc3QgVUkgPSAoKCkgPT4ge1xuXG4gICAgLypcbiAgICBDYXRlZ29yaWVzXG4gICAgKi9cblxuICAgIGNvbnN0ICRjYXRlZ29yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS1jb250YWluZXInKTtcbiAgICBjb25zdCAkYWRkQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWNhdGVnb3J5Jyk7XG4gICAgbGV0ICRjdXJyZW50QWN0aXZlID0gbnVsbDtcblxuICAgIGNvbnN0IGNyZWF0ZUh0bWxFbGVtZW50ID0gKHR5cGUsIGNsYXNzQXJyYXkgPSBudWxsLCBjb250ZW50ID0gbnVsbCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgaWYgKGNsYXNzQXJyYXkpIGNsYXNzQXJyYXkuZm9yRWFjaChjbHMgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNscykpO1xuICAgICAgICBpZiAoY29udGVudCkgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0gKGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICBjb25zdCAkY2F0ID0gY3JlYXRlSHRtbEVsZW1lbnQoJ2RpdicsIFsnY2F0ZWdvcnknXSk7XG4gICAgICAgICRjYXQuYXBwZW5kQ2hpbGQoY3JlYXRlSHRtbEVsZW1lbnQoJ2RpdicsIFsndGV4dCddLCBjYXRlZ29yeU5hbWUpKTtcbiAgICAgICAgJGNhdC5hcHBlbmRDaGlsZChjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWydkZWxldGUnLCAnYnRuJ10sICd4JykpO1xuICAgICAgICByZXR1cm4gJGNhdDtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRDYXRlZ29yeUxpc3RlbmVyID0gKGNhdCkgPT4ge1xuICAgICAgICBjb25zdCAkY2F0ZWdvcnkgPSAkY2F0ZWdvcnlDb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICBjb25zdCAkZGVsZXRlYnRuID0gJGNhdGVnb3J5Lmxhc3RDaGlsZDtcblxuICAgICAgICAkZGVsZXRlYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICByZW1vdmVDYXRlZ29yeSgkZGVsZXRlYnRuLnBhcmVudE5vZGUsIGNhdC5nZXROYW1lKCkpO1xuICAgICAgICB9KVxuXG4gICAgICAgICRjYXRlZ29yeS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNldEFjdGl2ZSgkY2F0ZWdvcnksIGNhdC5nZXROYW1lKCkpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IHNldEFjdGl2ZSA9ICgkY2F0ZWdvcnksIGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICBpZiAoJGN1cnJlbnRBY3RpdmUpICRjdXJyZW50QWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJGNhdGVnb3J5LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJGN1cnJlbnRBY3RpdmUgPSAkY2F0ZWdvcnk7XG4gICAgICAgIFxuICAgICAgICBQdWJTdWIucHVibGlzaCgnY2F0ZWdvcnlBY3RpdmUnLCBjYXRlZ29yeU5hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IGFkZENhdGVnb3J5ID0gKGNhdCkgPT4ge1xuICAgICAgICBjb25zdCAkbmV3Q2F0ZWdvcnkgPSBuZXdDYXRlZ29yeShjYXQuZ2V0TmFtZSgpKTtcbiAgICAgICAgJGNhdGVnb3J5Q29udGFpbmVyLmFwcGVuZENoaWxkKCRuZXdDYXRlZ29yeSk7XG4gICAgICAgIGFkZENhdGVnb3J5TGlzdGVuZXIoY2F0KTtcbiAgICAgICAgc2V0QWN0aXZlKCRuZXdDYXRlZ29yeSwgY2F0LmdldE5hbWUoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVtb3ZlQ2F0ZWdvcnkgPSAoY2F0RWxlbWVudCwgY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgICAgIGNhdEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdyZW1vdmVDYXRlZ29yeScsIGNhdGVnb3J5TmFtZSk7XG4gICAgfVxuXG5cbiAgICAvKlxuICAgIEl0ZW1zXG4gICAgKi9cbiAgICBcbiAgICBjb25zdCAkaXRlbUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pdGVtLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0ICRhZGRJdGVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1pdGVtJyk7XG5cbiAgICBjb25zdCBuZXdJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgJGl0ZW0gPSBjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWydpdGVtJ10pO1xuICAgICAgICAkaXRlbS5hcHBlbmRDaGlsZChjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWyd0ZXh0J10sIGl0ZW0uY29udGVudCkpO1xuICAgICAgICAkaXRlbS5hcHBlbmRDaGlsZChjcmVhdGVIdG1sRWxlbWVudCgnZGl2JywgWydkZWxldGUnLCAnYnRuJ10sICd4JykpO1xuICAgICAgICByZXR1cm4gJGl0ZW07XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvd0l0ZW1zID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIC8vIENsZWFyIGNvbnRlbnRzXG4gICAgICAgIHdoaWxlKCRpdGVtQ29udGFpbmVyLmNoaWxkRWxlbWVudENvdW50ID4gMCkgXG4gICAgICAgICAgICAkaXRlbUNvbnRhaW5lci5sYXN0Q2hpbGQucmVtb3ZlKCk7XG5cbiAgICAgICAgaXRlbXMubWFwKGl0ZW0gPT4gYWRkSXRlbShpdGVtKSk7XG5cbiAgICB9XG5cbiAgICBjb25zdCBhZGRJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAgICAgJGl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQobmV3SXRlbShpdGVtKSk7XG4gICAgICAgIC8vYWRkSXRlbUxpc3RlbmVyKGl0ZW0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZUl0ZW0gPSAoKSA9PiB7XG5cbiAgICB9XG5cbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICAkYWRkQ2F0ZWdvcnlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBQdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCBwcm9tcHQoJ0VudGVyJykpO1xuICAgICAgICB9KVxuXG4gICAgICAgICRhZGRJdGVtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlQ2F0ZWdvcnlOYW1lID0gJGN1cnJlbnRBY3RpdmUuZmlyc3RDaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Db250ZW50ID0gcHJvbXB0KCdFbnRlcicpO1xuICAgICAgICAgICAgUHViU3ViLnB1Ymxpc2goJ2FkZEl0ZW0nLCB7YWN0aXZlQ2F0ZWdvcnlOYW1lLCBpdGVtQ29udGVudH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIFB1YlN1Yi5zdWJzY3JpYmUoJ2NhdGVnb3J5QWRkZWQnLCBhZGRDYXRlZ29yeSk7XG5cbiAgICAgICAgUHViU3ViLnN1YnNjcmliZSgnc2hvd0l0ZW1zJywgc2hvd0l0ZW1zKTtcbiAgICAgICAgUHViU3ViLnN1YnNjcmliZSgnaXRlbUFkZGVkJywgYWRkSXRlbSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdCxcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVUk7XG5cblxuXG4iLCJpbXBvcnQgUHViU3ViIGZyb20gXCIuL21vZHVsZXMvcHVic3ViXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4vbW9kdWxlcy9VSVwiO1xuaW1wb3J0IENhdGVnb3J5IGZyb20gXCIuL21vZHVsZXMvY2F0ZWdvcnlcIlxuXG4vLyBmdW5jdGlvbiB0ZXN0KCkge1xuLy8gICAgIGNvbnN0IGNhdCA9IENhdGVnb3J5KCdoaScpO1xuXG4vLyAgICAgUHViU3ViLnN1YnNjcmliZSgnYWRkSXRlbScsIGNhdC5hZGRJdGVtKTtcbi8vICAgICBQdWJTdWIucHVibGlzaCgnYWRkSXRlbScsICd0ZXN0Jyk7XG4vLyB9XG5cbi8vIHRlc3QoKTtcblxuXG5jb25zdCBDYXRlZ29yeUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuXG4gICAgLy8gQ2F0ZWdvcnlcblxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBbXTtcblxuICAgIGNvbnN0IGdldENhdGVnb3J5ID0gKGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICByZXR1cm4gY2F0ZWdvcmllcy5maW5kKGNhdCA9PiBjYXQuZ2V0TmFtZSgpID09PSBjYXRlZ29yeU5hbWUpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBhZGRDYXRlZ29yeSA9IChjYXRlZ29yeU5hbWUpID0+IHtcbiAgICAgICAgaWYgKGdldENhdGVnb3J5KGNhdGVnb3J5TmFtZSkpIHtcbiAgICAgICAgICAgIGFsZXJ0KCdUaGlzIGNhdGVnb3J5IGFscmVhZHkgZXhpc3RzIScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhdCA9IENhdGVnb3J5KGNhdGVnb3J5TmFtZSk7XG4gICAgICAgIGNhdGVnb3JpZXMucHVzaChjYXQpO1xuICAgICAgICBQdWJTdWIucHVibGlzaCgnY2F0ZWdvcnlBZGRlZCcsIGNhdCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVtb3ZlQ2F0ZWdvcnkgPSAoY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY2F0ZWdvcmllcy5pbmRleE9mKGdldENhdGVnb3J5KGNhdGVnb3J5TmFtZSkpO1xuICAgICAgICBjYXRlZ29yaWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgLy8gSXRlbXNcblxuICAgIGNvbnN0IGdldEl0ZW1zID0gKGNhdGVnb3J5TmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtcyA9IGdldENhdGVnb3J5KGNhdGVnb3J5TmFtZSkuZ2V0SXRlbXMoKTtcbiAgICAgICAgUHViU3ViLnB1Ymxpc2goJ3Nob3dJdGVtcycsIGl0ZW1zKTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRJdGVtID0gKGl0ZW1JbmZvT2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNhdCA9IGdldENhdGVnb3J5KGl0ZW1JbmZvT2JqLmFjdGl2ZUNhdGVnb3J5TmFtZSk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhY3RpdmVDYXQuYWRkSXRlbShpdGVtSW5mb09iai5pdGVtQ29udGVudCk7XG4gICAgICAgIFB1YlN1Yi5wdWJsaXNoKCdpdGVtQWRkZWQnLCBpdGVtKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICBQdWJTdWIuc3Vic2NyaWJlKCdhZGRDYXRlZ29yeScsIGFkZENhdGVnb3J5KTtcbiAgICAgICAgUHViU3ViLnN1YnNjcmliZSgncmVtb3ZlQ2F0ZWdvcnknLCByZW1vdmVDYXRlZ29yeSk7XG5cbiAgICAgICAgUHViU3ViLnN1YnNjcmliZSgnY2F0ZWdvcnlBY3RpdmUnLCBnZXRJdGVtcyk7XG4gICAgICAgIFB1YlN1Yi5zdWJzY3JpYmUoJ2FkZEl0ZW0nLCBhZGRJdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0LFxuICAgIH07XG59KSgpO1xuXG5VSS5pbml0KCk7XG5DYXRlZ29yeUNvbnRyb2xsZXIuaW5pdCgpO1xuXG5QdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCAnQWxsJyk7XG5QdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCAnUmFuZG9tJyk7XG5QdWJTdWIucHVibGlzaCgnYWRkQ2F0ZWdvcnknLCAnQ2F0ZWdvcmllcycpO1xuXG5cblxuXG4iLCJpbXBvcnQgUHViU3ViIGZyb20gXCIuL3B1YnN1YlwiO1xuXG5jb25zdCBJdGVtID0gKGlkLCBjb250ZW50KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgfTtcbn1cblxuY29uc3QgQ2F0ZWdvcnkgPSAoY2F0ZWdvcnlOYW1lKSA9PiB7XG4gICAgbGV0IG5hbWUgPSBjYXRlZ29yeU5hbWU7XG4gICAgbGV0IGl0ZW1zID0gW107XG5cbiAgICBjb25zdCBnZXROYW1lID0gKCkgPT4gbmFtZTtcblxuICAgIGNvbnN0IGFkZEl0ZW0gPSAoaXRlbUNvbnRlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IEl0ZW0oMCwgaXRlbUNvbnRlbnQpO1xuICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG5cbiAgICAvLyBjb25zdCByZW1vdmVJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAvLyAgICAgXG4gICAgLy8gfVxuXG4gICAgY29uc3QgZ2V0SXRlbXMgPSAoKSA9PiBpdGVtcztcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWUsXG4gICAgICAgIGFkZEl0ZW0sXG4gICAgICAgIGdldEl0ZW1zLFxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhdGVnb3J5OyJdLCJuYW1lcyI6WyJfZXZlbnRzIiwiY2hlY2tFdmVudCIsImV2ZW50TmFtZSIsImV2ZW50IiwiZmluZCIsImdldE5hbWUiLCJuYW1lIiwiaGFuZGxlcnMiLCJhZGRIYW5kbGVyIiwiaGFuZGxlciIsInB1c2giLCJpbnZva2VIYW5kbGVycyIsImV2ZW50QXJncyIsImZvckVhY2giLCJmbiIsIl9FdmVudCIsInB1Ymxpc2giLCJzdWJzY3JpYmUiLCIkY2F0ZWdvcnlDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCIkYWRkQ2F0ZWdvcnlCdG4iLCIkY3VycmVudEFjdGl2ZSIsImNyZWF0ZUh0bWxFbGVtZW50IiwidHlwZSIsImNsYXNzQXJyYXkiLCJjb250ZW50IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbHMiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInNldEFjdGl2ZSIsIiRjYXRlZ29yeSIsImNhdGVnb3J5TmFtZSIsInJlbW92ZSIsImFkZENhdGVnb3J5IiwiY2F0IiwiJG5ld0NhdGVnb3J5IiwiJGNhdCIsImFwcGVuZENoaWxkIiwibmV3Q2F0ZWdvcnkiLCJsYXN0Q2hpbGQiLCIkZGVsZXRlYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVDYXRlZ29yeSIsInBhcmVudE5vZGUiLCJhZGRDYXRlZ29yeUxpc3RlbmVyIiwiY2F0RWxlbWVudCIsIiRpdGVtQ29udGFpbmVyIiwiJGFkZEl0ZW1CdG4iLCJzaG93SXRlbXMiLCJpdGVtcyIsImNoaWxkRWxlbWVudENvdW50IiwibWFwIiwiaXRlbSIsImFkZEl0ZW0iLCIkaXRlbSIsIm5ld0l0ZW0iLCJpbml0IiwicHJvbXB0IiwiYWN0aXZlQ2F0ZWdvcnlOYW1lIiwiZmlyc3RDaGlsZCIsIml0ZW1Db250ZW50IiwiQ2F0ZWdvcnlDb250cm9sbGVyIiwiY2F0ZWdvcmllcyIsImdldENhdGVnb3J5IiwiYWxlcnQiLCJpZCIsImdldEl0ZW1zIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiaXRlbUluZm9PYmoiXSwic291cmNlUm9vdCI6IiJ9